
#### Different failure cases that can arise during scan

sp {op_scan1*propose*handle-execution-failure*stop
   (state <s> ^name op_scan1
              ^current-action <a>)
   (<a> ^{ << scan-command stop-command >> } <cmd>)
   (<cmd> ^status << failure interrupted >>)
-->
   (<s> ^operator <o> + = >)
   (<o> ^name handle-execution-failure
        ^category failure-handling
        ^action <a>
        ^command <cmd>)
}

sp {op_scan1*propose*handle-execution-failure*turn
   (state <s> ^name op_scan1
              ^current-action <a>)
   (<a> ^{ << scan-command stop-command >> } <cmd>)
   (<cmd> ^status << failure >>) # Turn can be interrupted
-->
   (<s> ^operator <o> + = >)
   (<o> ^name handle-execution-failure
        ^category failure-handling
        ^action <a>
        ^command <cmd>)
}

sp {op_scan1*propose*handle-command-failure
   (state <s> ^name op_scan1
              ^current-action <a>)
   (<a> ^{ << scan-command stop-command >> } <cmd>)
   (<cmd> ^status error)
-->
   (<s> ^operator <o> + = >)
   (<o> ^name handle-command-failure
        ^category failure-handling
        ^action <a>
        ^command <cmd>)
}

##### Different failure cases that can arise during turn
#
## unsatisifed-until-clause: the turn command finished without the until clause being satisfied
#sp {op_scan1*propose*report-failure*unsatisifed-until-clause*after*turn
#   (state <s> ^name op_scan1
#              ^current-action.execution-operator.action-handle <handle>
#              ^current-action.turn-command.status success
#              ^until-clause <until>)
#   (<until> -^satisfied true)
#-->
#   (<s> ^operator <o> + > =)
#   (<o> ^name report-failure
#        ^failure-type unsatisfied-until-clause
#        ^failure-info <handle>)
#}
#
#sp {op_scan1*apply*report-failure*unsatisfied*until-clause*remove*unseen*in*predicates
#  (state <s> ^name op_scan1
#             ^operator <o>
#             ^world.robot.current-location <loc>
#             ^world.predicates.predicate <in-pred>)
#  (<o> ^name report-failure
#       ^failure-type unsatisfied-until-clause)
#  (<in-pred> ^handle in1
#             ^instance <i>)
#  (<i> ^1 <obj> ^2 <loc>)
#  (<obj> -^predicates.object-status confirmed
#         -^predicates.visible true)
#-->
#  (<in-pred> ^instance <i> -)
#}
#
## unsatisifed-until-clause: the scan command finished without the until clause being satisfied
#sp {op_scan1*propose*report-failure*unsatisifed-until-clause*after*scan
#   (state <s> ^name op_scan1
#              ^current-action.execution-operator.action-handle <handle>
#              ^current-action.scan-command.status success
#              ^until-clause <until>)
#   (<until> -^satisfied true)
#-->
#   (<s> ^operator <o> + > =)
#   (<o> ^name report-failure
#        ^failure-type unsatisfied-until-clause
#        ^failure-info <handle>)
#}
